### START TEMPLATE CONFIG
##### DO NOT EDIT THIS FILE DIRECTLY #####

server {
  listen 80;
  server_name DOMAIN;
  return 301 http://www.DOMAIN$request_uri;
}

server {
  listen 80;
  server_name www.DOMAIN;
  root /web/DOMAIN/live/current/public;
  access_log  /web/DOMAIN/logs/access.log  main;
  error_log  /web/DOMAIN/logs/error.log  error;
  #passenger_ruby /web/DOMAIN/.rvm/wrappers/ruby-1.9.3-p374@OWNER/ruby;
  passenger_enabled on;
  rails_env production;
  gzip on;
#assets#  location ~ ^/(assets)/  {
#assets#    #root /web/DOMAIN/live/current/public;
#assets#    gzip_static on; # to serve pre-gzipped version
#assets#    expires max;
#assets#    add_header Cache-Control public;
#assets#  }
}

server {
  listen 80;
  server_name stage.DOMAIN;
  root /web/DOMAIN/stage/current/public;
  access_log  /web/DOMAIN/logs/stage-access.log  main;
  error_log  /web/DOMAIN/logs/stage-error.log  error;
  #passenger_ruby /web/DOMAIN/.rvm/wrappers/ruby-1.9.3-p374@OWNER/ruby;
  passenger_enabled on;
  rails_env staging;
  gzip on;
  auth_basic	"DOMAIN Staging";
  auth_basic_user_file	/web/DOMAIN/pw/stage.htpw;
}

server {
  listen 80;
  server_name dev.DOMAIN;
  root /web/DOMAIN/dev/current/public;
  access_log  /web/DOMAIN/logs/dev-access.log  main;
  error_log  /web/DOMAIN/logs/dev-error.log  error;
  #passenger_ruby /web/DOMAIN/.rvm/wrappers/ruby-1.9.3-p374@OWNER/ruby;
  passenger_enabled on;
  rails_env development;
  gzip on;
  auth_basic	"DOMAIN Development";
  auth_basic_user_file	/web/DEFAULT/pw/dev.htpw;
}

### END TEMPLATE CONFIG
